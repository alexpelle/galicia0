var isMobile=!1,mobileDimensionLimit=480,htmlSelection=htmlSelection||"h1,h2,h3,h5,input:not([type=image],[type=button],[type=submit],input[data-hj-masked]),h4.clickeable,label,strong,b,ul,a,p,div:not(:has(*)),button.dropdown-toggle",htmlFilter=htmlFilter||"ul.nav-sidebar, ul.nav-sidebar > li > a,a.logo,.btn-caps, div.table-row, div.hidden-xs > button.btn, .notSensible,[data-hj-masked]";function getIsMobile(){return isMobile||$(window).width()<mobileDimensionLimit}function getIsDevice(){return/Tablet|iPad|Mobile|Windows Phone|Lumia|Android|webOS|iPhone|iPod|Blackberry|PlayBook|BB10|Opera Mini|\bCrMo\/|Opera Mobi/i.test(navigator.userAgent.toLowerCase())}function ocultarTooltip(){$(".tooltip").each(function(e){$(this).hide()})}function agregarTooltipsFima(){0<$(".icono_Fima").length&&$(".icono_Fima").each(function(){$(this).tooltip({show:!0,placement:"top",title:$(this).data("hover"),tooltipClass:"tooltip",trigger:"hover"}),agregarIconoAyudaTooltip($(this))})}function agregarIconoAyudaTooltip(e){var t=$("<i href='javascript:void(0)' class='icon-help hidden-xs hidden-lg'></i>");null!=navigator.userAgent.match(/Android/i)&&t.removeClass("hidden-lg"),e.after(t),t.tooltip({show:!0,placement:"top",title:e.data("hover"),tooltipClass:"tooltip"})}function updateInputs(){$("input.form-control").each(function(){var e=$(this).closest(".inputArea");$(this);0!=this.value?e.addClass("typed"):e.removeClass("typed")})}$(document).ready(function(){var e=$(window).width()+$(window).height();$(window).resize(function(){isMobile=$(window).width()<mobileDimensionLimit,fixBottomBlur(),fixedFooter(),$(window).width()+$(window).height()!=e&&$(".styleBlur").remove()}),$(window).on("hidden.bs.modal",function(e){$(".modal-backdrop.fade.in").length&&$(".modal-backdrop.fade.in").remove()}),$(window).on("shown.bs.modal",function(e){}),closeDropdown(),$(window).innerWidth()<=700&&fixModal()}),$(window).on("load",function(){fixBottomBlur(),$(document).ajaxComplete(function(e,t,i){fixBottomBlur(),-1!=i.url.indexOf("refreshear-caja-puntas")&&fixPerfil()}),$(window).bind("orientationchange",function(e){fixBottomBlur()})});var capsLockEnabled=null;function checkWarning(e){capsLockEnabled?(0<e.find(".capsLock").length&&e.addClass("isCapsOn"),capsLockEnabled=!0):(e.removeClass("isCapsOn"),capsLockEnabled=!1)}function inputsEfect(){document.msCapsLockWarningOff=!0,(void 0===document.msCapsLockWarningOff||document.msCapsLockWarningOff)&&(getIsMobile()||getIsDevice()?$("input").on("keyup",function(e){if(!$(this).hasClass("capsLockEspecial")){var t=$(this).val()[$(this).val().length-1];if(!t||t.toLowerCase()===t.toUpperCase())return;capsLockEnabled=t.toUpperCase()==t}}):$(document).on("keydown",function(e){var t=e.key;!t||t.toLowerCase()===t.toUpperCase()||1<t.length&&"CapsLock"!=t||(capsLockEnabled=t.toLowerCase()===t&&e.shiftKey||t.toUpperCase()===t&&!e.shiftKey)}));var e=$("input.form-control");/iphone/i.test(navigator.userAgent.toLowerCase());e.each(function(){var t=$(this).closest(".inputArea"),e=t.find(".inputLabel"),i=$(this);e.on("click",function(e){i.focus()}),$(i).is(":focus")&&t.addClass("focus"),checkWarning(t),0!=this.value&&t.addClass("typed"),i.on("focus blur",function(e){"focus"===e.type?t.addClass("focus"):t.removeClass("focus"),t.toggleClass("typed",""!==i.val()),(getIsMobile()||getIsDevice())&&(capsLockEnabled=!1),checkWarning(t)}).on("input",function(e){i.toggleClass("typed",""!==i.val()),t.toggleClass("typed",""!==i.val()),checkWarning(t),i.is(":focus")&&t.toggleClass("typed",""!==i.val())}).on("keyup",function(){var e=$(this).val();checkWarning(t),""!=e?$(this).closest(".inputArea").addClass("typed"):$(this).closest(".inputArea").removeClass("typed")}).on("touchstart touchend",function(e){t.addClass("focus")})}),$(".showPassword").not(".login").each(function(){$(this).on("touchstart touchend, mousedown",function(e){$(this).closest(".inputArea").find("input.hidden-control").attr("type","text")}),$(this).on(" touchleave, mouseup mouseleave",function(e){$(this).closest(".inputArea").find("input.hidden-control").attr("type","password")})}),$(".showPassword.login").each(function(){$(this).on("touchstart touchend, mousedown",function(e){$(this).closest(".inputWrapper").addClass("showtext")}),$(this).on(" touchleave, mouseup mouseleave",function(e){$(this).closest(".inputWrapper").removeClass("showtext")})})}function closeAlert(){0<$(".msg-alert").length&&($(".msg-alert + div").addClass("push-msg"),$(".msg-alert a.icon-close").on("click",function(e){e.preventDefault(),$(".sidebar").animate({top:"-=84"},500,function(){}),$(".msg-alert").animate({marginTop:"-=84"},500,function(){$(".push-msg").removeClass("push-msg"),$(".msg-alert").remove()})}))}function openPanel(e){e.addClass("is-visible"),$("body").addClass("side-open"),e.find(".cd-panel:after").animate({opacity:"1"},5e3,function(){}),e.find(".cd-panel-container").animate({right:"0"},500,function(){})}function bindClosePanel(t){$("#"+t).on("click",function(e){($(e.target).is(".cd-panel")||$(e.target).is(".cd-panel-close"))&&(closePanel($("#"+t)),e.preventDefault())})}function closePanel(e){e||(e=$(".cd-panel")),$(".cd-panel-container").animate({right:"-420px"},500,function(){e.removeClass("is-visible"),$("body").removeClass("side-open")})}function fixedMenu(){if(0<$(".sidebar").length){var t=$(".sidebar").offset().top;$(window).scroll(function(){var e=$(window).scrollTop();t<=e?$(".sidebar").addClass("fixed"):$(".sidebar").removeClass("fixed")})}}function fixedFooter(){if($(".table-footer").find(".fixed-info").length){var e=$(".table-footer").width();$(".fixed-info").width(e),fixMarginBottom()}}function fixMarginBottom(){footer=$(".fixed-info").height(),table=$(".table-container").height(),$(".table-container").css("margin-bottom",footer+50)}function fixedHeader(){window.addEventListener("scroll",function(e){var t=window.pageYOffset||document.documentElement.scrollTop,i=$(".page-header:not(.highlight)");10<t?(i.addClass("fixed"),$(".navbar-default").addClass("fixed")):(i.removeClass("fixed"),$(".navbar-default").removeClass("fixed"))})}function fixPerfil(){0<$(".highlight").length&&(fixPadding(),$(window).resize(function(){setTimeout(fixPadding,200)}),window.addEventListener("scroll",function(e){var t=window.pageYOffset||document.documentElement.scrollTop,i=height-height/4;$(window).width()<700?i<t?header.addClass("sticky"):(header.removeClass("sticky"),fixPadding()):i<t?(eHeight=$(".highlight").outerHeight(),eHeight>height-2&&(navigator.userAgent.match(/Tablet|iPad|Mobile|Windows Phone|Lumia|Android|webOS|iPhone|iPod|Blackberry|PlayBook|BB10|Opera Mini|\bCrMo\/|Opera Mobi/i)?header.addClass("sticky"):($(".highlight").css("height","84px"),header.addClass("sticky"),header.removeAttr("style")))):header.hasClass("sticky")&&(header.removeClass("sticky"),setTimeout(function(){fixPadding()},200))}))}function fixPadding(){header=$(".highlight"),height=header.outerHeight(),header.nextAll("div:first").css("margin-top",height+"px")}function inputWidth(){$(".inputWrapper.large").each(function(){var e=$(this).find(".inputLabel");$(this).width(e.width()+15)})}function inputAutosize(){/iphone/i.test(navigator.userAgent.toLowerCase());$(".inputAutosize").each(function(){var t=$(this).find(".copycat");$(this).find(".inputAuto").on("input",function(){var e=$(this).val();t.html(""===e?"":e),$(this).hasClass("cuit")?$(this).width(t.width()+15):$(this).width(t.width()+5),$(this).is(":focus")&&$(this).closest(".inputAutosize").toggleClass("typed",""!==e),$(this).attr("type")&&$(this).attr("value")&&$(this).attr("type").match(/^(text|search|password|tel|url)$/i)&&$(this).setCursorPosition($(this).val().length)}),$(this).find(".inputAuto").width(t.width());var i=$(this).closest(".inputAutosize"),a=$(this).find(".inputAuto");if($(a).is(":focus")&&i.addClass("focus"),$(this).find(".inputAuto").on("focus blur",function(e){"focus"===e.type?i.addClass("focus"):i.removeClass("focus"),i.toggleClass("typed",""!==$(this).val()).on("input",function(){i.toggleClass("typed",""!==a.val()),""==i.find(".inputAuto").val()&&$(this).find(".inputAuto").width(o)}),0<i.find(".placeholder").length&&""==i.find(".inputAuto").val()&&(t.html(i.find(".placeholder").html()),$(this).width(t.width()+5))}),""!=i.find(".inputAuto").val()&&(t.html(i.find(".inputAuto").val()),$(this).find(".inputAuto").width(t.width()+5),i.addClass("typed")),0<i.find(".placeholder").length){if(pWidth=i.find(".placeholder").width(),i.find(".inputAuto").css("min-width",pWidth+"px"),""==i.find(".inputAuto").val()){t.html(i.find(".placeholder").html()),$(this).find(".inputAuto").width(t.width()+5);var o=$(this).find(".inputAuto").width()}i.find(".placeholder").click(function(){i.addClass("focus"),i.find(".inputAuto").focus(),i.find(".inputAuto").select()})}})}function btnTooltip(){0<$(".btn-tooltip").length&&$(".btn-tooltip").each(function(){var e=$("<i href='#' class='icon-help hidden-xs hidden-lg'></i>"),t=$(this).attr("data-cotizacion"),i=$(this).attr("data-name");e.attr("data-cotizacion",t),e.attr("data-name",i),null!=navigator.userAgent.match(/Android/i)&&e.removeClass("hidden-lg"),$(this).after(e),e.tooltip({show:!0,placement:"top",title:"Cotización del día "+$(this).attr("data-cotizacion"),tooltipClass:"tooltip"})})}function hiddenMenu(){0<$(".highlight").length&&(0<$(".detail-for-overview").length?$(".navbar-default").addClass("detail-for-overview"):$(".navbar-default").addClass("hidden"))}function showMenu(){width=jQuery(window).width(),jQuery(window).resize(function(){width=jQuery(window).width()}),$(".navbar-toggle").on("click",function(e){e.preventDefault(),$(".sidebar").addClass("in"),$("body").addClass("side-open"),$(".sidebar").animate({left:"0"},300,function(){})}),$(".main").on("click",function(e){width<993&&0<$(".sidebar.in").length&&($("body").removeClass("modal-open"),$(".sidebar").animate({left:"-250px"},300,function(){$(".sidebar").removeClass("in"),$(".sidebar").removeAttr("style"),$("body").removeClass("side-open")}))})}function showErrorModal(e,t){if(!$("#modal-error-function").hasClass("in")){var i='<div id="modal-error-function" class="modal fade" tabindex="-1" role="dialog" style="z-index: 10999"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h3>'+e+'</h3></div><div class="modal-body"><p>'+t+'</p></div><div class="modal-footer"><a href="#" class="btn btn-caps" data-dismiss="modal">aceptar</a></div></div></div></div>';return $("#mainModalContainer").html("").append(i),$("#modal-error-function").modal({backdrop:"static",keyboard:!1}),$("#modal-error-function").on("keyup",function(e){e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0}),!1}}function showHBModal(e,t,i){$.HBModal.options.body=i,$.HBModal.options.header.label=t,$.HBModal.options.modalType=e,$.HBModal.showModal()}function carouselEffect(){$(".carousel").customcarousel({watchCSS:!0,cellAlign:"left",contain:!0,prevNextButtons:!1,pageDots:!1,freeScroll:!0})}function showShadow(){0<$(".highlight").length&&$(".sidebar").addClass("shadow")}function dropdownMobile(){var t=/ipad/i.test(navigator.userAgent.toLowerCase());function i(e){if(0<e.length){var t=e.siblings(".dropdown-menu"),i=t.outerHeight(),a=$(window).height(),o=($("body").height(),e.offset().top+e.outerHeight()),n=$(window).scrollTop(),s=o-n+i-a,r=n+s+10;t.parent().parent().parent().hasClass("page-header")&&(o+=10),0<s&&(navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/)?(r-=10,window.scrollTo(0,r)):$("html, body").animate({scrollTop:r},200,function(){$("html").attr("style","overflow:hidden")})),t.offset({top:o}),$("body").attr("style","display:block")}}$(document).on("shown.bs.dropdown",function(e){$(window).width()<760?($("body").addClass("open-drop"),i($(e.relatedTarget))):t&&i($(e.relatedTarget))}),$(document).on("hidden.bs.dropdown",function(e){$(window).width()<760?($("body").removeClass("open-drop"),$("html").removeAttr("style")):t&&i($(e.relatedTarget)),$(".dropdown-menu.picker").removeAttr("style")}),$(window).resize(function(){$(window).width()<760?i($(document).find(".dropdown.open .btn")):t&&i($(event.relatedTarget))})}function stopBodyScrolling(e){!0===e?document.getElementsByClassName("main")[0].addEventListener("touchmove",freezeVp,!1):document.getElementsByClassName("main")[0].removeEventListener("touchmove",freezeVp,!1)}function btnRippled(){$(".btn-default").on("click",function(e){elem=$(this),elem.addClass("btn-rippled");var t=$("<div/>"),i=$(this).offset(),a=e.pageX-i.left,o=e.pageY-i.top;t.addClass("ripple-effect");var n=$(".ripple-effect");n.css("height",$(this).height()),n.css("width",$(this).height()),t.css({top:o-25,left:a-25,background:$(this).data("ripple-color")}).appendTo($(this)),window.setTimeout(function(){t.click(!1),t.remove(),elem.removeClass("btn-rippled")},1200)})}function contentScroll(){if(0<$(".content-section").length){var e=$(".page-header").outerHeight(),t=$(".content-section > div:first-child");t.removeAttr("style");var i=t.outerHeight(),a=$(".content-bottom").outerHeight(),o=$(window).height(),n=e+a,s=o-n,r=s-15;i<s?t.css("height",o-n+"px"):(t.css("overflow-y","scroll"),t.css("max-height",r+"px"))}}function contentFix(){if(0<$(".content-section").length){$(".content-bottom").addClass("relative");var e=$(".page-header").outerHeight(),t=$(".content-section > div:first-child");t.removeAttr("style");var i=t.outerHeight()+30,a=$(".content-bottom").innerHeight(),o=($(".content-bottom .btn").outerHeight(),$(window).height()),n=$(window).width(),s=o-(e+a)-20;992<n?i<s?t.css("height",s+"px"):t.css("height",i+"px"):700<n?($(".content-bottom").removeClass("relative"),t.css("overflow-y","scroll"),t.css("height",s-50+"px")):$(".content-bottom").removeClass("relative")}}function inputLowerCase(){$("input.alphanumeric_min").attr("autocapitalize","none")}function mostrarAlertaEncabezado(e){$("#PWarning").html(e),$("#HeadWarning").addClass("msg-alert"),$(".navbar-toggle").addClass("nav-padding-top"),$("#HeadWarning").show()}function closeDropdown(){/ipad|iphone|ipod/i.test(navigator.userAgent.toLowerCase())&&$(document).unbind("touchend").on("click touchend",function(e){$(e.target).parents(".dropdown-menu").length<1&&$(".dropdown").hasClass("open")&&($(".dropdown").removeClass("open"),$("body").hasClass("open-drop")&&($("body").removeClass("open-drop"),$("body").removeAttr("style")))})}function fixBottomBlur(){$("body style").hasClass("styleBlur")&&$("body").find(".styleBlur").remove();var e,t=0;700<=window.innerWidth&&window.innerWidth>window.innerHeight&&(t=10);var i=!1;1<=$(document).find(".content-bottom").length&&(1<=$(".content-bottom").find(".content-bottom-text.check-desc").length&&(i=!0),$(".content-bottom").children().each(function(){$(this).hasClass("cd-panel")||(e=$(this).outerHeight(),t+=e)})),0==i&&1<=$(document).find(".content-bottom-text.check-desc").length&&(t+=$(".content-bottom-text.check-desc").outerHeight()),$("body").append('<style class="styleBlur">        .content-bottom:before {            content: "";            position: fixed;            bottom:'+t+'px;            height: 25px;            width: 100%;            left: 0;            background: -moz-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,0) 1%, rgba(255,255,255,0.99) 99%, rgba(255,255,255,1) 100%);            background: -webkit-linear-gradient(top, rgba(255,255,255,0) 0%,rgba(255,255,255,0) 1%,rgba(255,255,255,0.99) 99%,rgba(255,255,255,1) 100%);            background: linear-gradient(to bottom, rgba(255,255,255,0) 0%,rgba(255,255,255,0) 1%,rgba(255,255,255,0.99)99%,rgba(255,255,255,1)100%);            filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#00ffffff",endColorstr="#ffffff",GradientType=0 );        }    </style>')}function fixModal(){$(window).on("show.bs.modal",function(e){setTimeout(function(){250<$("#modal-id .modal-content").height()&&$("#modal-id").addClass("xxl")},200)})}function inputExtraInfo(){$(".inputAutosize .extra-content").on("click",function(){$(".inputAutosize input").focus()})}function toLowerCapitalize(){var e;$(".text-capitalize").each(function(){e=$(this).text().toLowerCase(),$(this).text(e)})}function setTooltips(){var e;$('[data-toggle="tooltip"]').each(function(){e=$(this).attr("data-content"),$(this).tooltip({show:!0,placement:"auto",title:e,tooltipClass:"tooltip",trigger:"hover"})})}function updateTooltips(){$('[data-toggle="tooltip"]').each(function(){content=$(this).attr("data-content"),$(this).tooltip("hide").attr("data-original-title",content)})}$.fn.setCursorPosition=function(a){return this.each(function(e,t){if(t.setSelectionRange)t.setSelectionRange(a,a);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",a),i.moveStart("character",a),i.select()}}),this};var modal=null,widthGuia=$(window).width(),heightGuia=$(window).height(),overlayGuia='<div class="overlay-guia on hidden"></div>',botonSalir='<a name="Salir" class="pull-left btn btn-caps" href="javascript:void(0)" onclick="guiaNoInteresa(%data-codigo%, %data-esVoluntaria%);">Salir</a>',botonSiguiente='<a name="Siguiente" id="next" class="pull-right btn btn-caps"  href="javascript:void(0)" onclick="mostrarProximaGuia(%data-actual%, %data-proximo%);">Siguiente</a>',botonAnterior='<a name="Anterior" id="previous" class="pull-right btn btn-caps" href="javascript:void(0)" onclick="mostrarProximaGuia(%data-actual%, %data-proximo%);">Anterior</a>',botonFinalizar='<a name="Finalizar" id="finish" class="pull-right btn btn-caps" href="javascript:void(0)" onclick="terminarGuia(%data-codigo%, %data-esVoluntaria%)">Finalizar</a>',espacio='<div class="clearfix"></div>',botonEntendido='<a name="Entendido" id="entendido" class="pull-right btn btn-caps" href="javascript:void(0)" onclick="terminarGuia(%data-codigo%, %data-esVoluntaria%)">Entendido</a>',mantle='<div class="mantle off"></div>',hole="<div class='hole off' data-id='%data-id%' data-secuencia='%data-secuencia%' data-ubicacion='%data-ubicacion%' data-attachedTo='%data-attachedto%'></div>",guiaIniciada=!1,diferenciaPixels=5,listaMensajes=[],contentGuia='<div id="content" class="hidden content-hidden-guia"><div id="%data-id%"><div name="messages"><p class="guiaMessage">%data-message%</p></div><div name="buttons">%data-buttons%</div></div></div>';function inicializarGuiaNovedad(e){if(!isDefined(e))return!1;guiaIniciada||inicializarGuia(e,!(guiaIniciada=!0))}function inicializarGuiaVoluntaria(e){if(!isDefined(e))return!1;guiaIniciada||inicializarGuia(e,guiaIniciada=!0)}function inicializarGuia(o,n){if(!isDefined(o))return!1;getJsonGuia(o).success(function(e){var t=e&&e.Mensajes,i=e&&e.CantidadMinimaMensajesMostrar,a=e.EsBurbuja;AttachGuia(o,t,!!n,i,a),AttachResizeGuia(o,t,!!n,i,a)}).error(function(e){cerrar()})}var resizeTimeout=null;function AttachResizeGuia(t,i,a,o,n){$(window).on("resize",function(e){$(window).width()==widthGuia&&$(window).height()==heightGuia||!guiaIniciada||(widthGuia=$(window).width(),heightGuia=$(window).height(),$(".hole").popover("hide"),$(".hole").popover("destroy"),$(".hole").remove(),$(".mantle").remove(),listaMensajes=[],modal=null,resizeTimeout||(resizeTimeout=setTimeout(function(){AttachGuia(t,i,a,o,n),resizeTimeout=null},250)))})}function AttachGuia(e,t,i,a,o){var n=ObtenerMensajesAMostrar(t),s=n.length;a&&s<a?terminarGuia(e,i):(precargarGuias(e,n,i,o),o?mostrarProximaGuia(0,0):modal&&($(window).width()<1200&&$(".page-header").hasClass("fixed")&&$("html, body").stop().animate({scrollTop:0},200,"swing"),modal.showModal()))}function precargarGuias(i,a,o,n){var s=a.length;$("body").append(mantle),$("body").addClass("no-overflow"),listaMensajes=[],1===s?n?setUnicaBurbuja(i,a[0],o,s):setUnicoModal(i,a[0],o,s):2===s?n?(setPrimeraBurbuja(i,a[0],o,s),setSegundoYUltimoMensajeBurbuja(i,a[1],o,s)):(setPrimerModal(i,a[0],o,s),setSegundoYUltimoMensaje(i,a[1],o,s)):$.each(a,function(e,t){0===e?n?setPrimeraBurbuja(i,a[0],o,s):setPrimerModal(i,a[0],o,s):1===e?setSegundoMensaje(i,t,o,s,n):e===a.length-1?setUltimoMensaje(i,t,o,s):setMensajeIntermedio(i,t,o,s)})}function setUnicoModal(t,e,i,a){setModal(t,e,{primaryButton:{enabled:!0,label:"ENTENDIDO",onClickCallBack:function(e){terminarGuia(t)}}},i,a)}function setUnicaBurbuja(t,e,i,a){setModal(t,e,o={primaryButton:{enabled:!0,label:"ENTENDIDO",onClickCallBack:function(e){terminarGuia(t)}}},i,a);var o=$('<div id="buttons"></div>'),n=botonEntendido.replace("%data-codigo%",t).replace("%data-esVoluntaria%",i);$(o).append(n),setMensaje(t,e,i,a,o)}function setPrimeraBurbuja(e,t,i,a){setModal(e,t,o,i,a);var o=$('<div id="buttons"></div>'),n=botonSiguiente.replace("%data-actual%",t.secuencia).replace("%data-proximo%",t.secuencia+1),s=botonSalir.replace("%data-codigo%",e).replace("%data-esVoluntaria%",i);$(o).append(n),$(o).append(s),setMensaje(e,t,i,a,o)}function setPrimerModal(t,e,i,a){var o={secondaryButton:{enabled:!0,label:"CONTINUAR",onClickCallBack:function(e){mostrarProximaGuia(0,1)}}};i||(o.primaryButton={enabled:!0,label:"VER MÁS TARDE",onClickCallBack:function(e){guiaNoInteresa(t,i)}}),setModal(t,e,o,i,a)}function setModal(e,t,i,a,o){var n=t.mensaje.split("|");modal=$(document).HBModal({modalId:getIdGuia(e,t,a,o),header:{label:n[0]||""},body:n[1]||"",buttons:i})}function setSegundoYUltimoMensaje(e,t,i,a){var o=$('<div id="buttons"></div>'),n=botonFinalizar.replace("%data-codigo%",e).replace("%data-esVoluntaria%",i);$(o).append(n),$(o).append(espacio),setMensaje(e,t,i,a,o)}function setSegundoYUltimoMensajeBurbuja(e,t,i,a){var o=$('<div id="buttons"></div>'),n=botonFinalizar.replace("%data-codigo%",e).replace("%data-esVoluntaria%",i),s=botonAnterior.replace("%data-actual%",t.secuencia).replace("%data-proximo%",t.secuencia-1);$(o).append(n),$(o).append(s),$(o).append(espacio),setMensaje(e,t,i,a,o)}function setUltimoMensaje(e,t,i,a){var o=$('<div id="buttons"></div>'),n=botonFinalizar.replace("%data-codigo%",e).replace("%data-esVoluntaria%",i),s=botonAnterior.replace("%data-actual%",t.secuencia).replace("%data-proximo%",t.secuencia-1);$(o).append(n),$(o).append(s),$(o).append(espacio),setMensaje(e,t,i,a,o)}function setSegundoMensaje(e,t,i,a,o){var n=$('<div id="buttons"></div>'),s=botonSalir.replace("%data-codigo%",e).replace("%data-esVoluntaria%",i),r=botonSiguiente.replace("%data-actual%",t.secuencia).replace("%data-proximo%",t.secuencia+1),d=botonAnterior.replace("%data-actual%",t.secuencia).replace("%data-proximo%",t.secuencia-1);$(n).append(r),o&&$(n).append(d),$(n).append(s),$(n).append(espacio),setMensaje(e,t,i,a,n)}function setMensajeIntermedio(e,t,i,a){var o=$('<div id="buttons"></div>'),n=botonSalir.replace("%data-codigo%",e).replace("%data-esVoluntaria%",i),s=botonAnterior.replace("%data-actual%",t.secuencia).replace("%data-proximo%",t.secuencia-1),r=botonSiguiente.replace("%data-actual%",t.secuencia).replace("%data-proximo%",t.secuencia+1);$(o).append(n),$(o).append(r),$(o).append(s),$(o).append(espacio),setMensaje(e,t,i,a,o)}function setMensaje(e,t,i,a,o){var n=contentGuia.replace("%data-message%",t.mensaje).replace("%data-buttons%",$(o).html());n=n.replace("%data-id%",getIdGuia(e,t,i,a));var s={html:!0,content:$(n).html(),container:"body",placement:function(){return getUbicacionGuia(t.ubicacion)},trigger:"manual"};listaMensajes.push({mensaje:t,contenido:n,popover:s})}function getTopOffset(e){return e-diferenciaPixels<=0?0:e-$(document).scrollTop()-diferenciaPixels}function ObtenerMensajesAMostrar(e){var n=[],s=0;return $.each(e,function(e,t){var i={},a=null,o=null;if($.each(t.AdjuntoA.split("|"),function(e,t){if($(t).is(":visible")&&guiaIsVisible($(t))&&guiaInWidthViewPort($(t)))return a=$(t),o=t,!1}),!isDefined(a)||null==a)return!0;i.asociadoA=a,i.asociadoASelector=o,i.mensaje=t.Mensaje,i.secuencia=s,i.id=t.Secuencia,i.ubicacion=t.Ubicacion,n.push(i),s++}),n.sort(function(e,t){return e.secuencia-t.secuencia})}function terminarGuia(t,e){e||$.ajax({url:"/Guia/TerminarGuia",dataType:"json",type:"POST",data:{codigo:t},error:function(e){OnJsError(e,!1,"Error al terminar la guia con código: "+t)},timeout:svcDefaultTimeoutMs}),cerrar()}function mostrarProximaGuia(e,t){lock||($(".mantle").removeClass("off"),$(".hole[data-secuencia='"+e+"']").popover("destroy"),$(".hole[data-secuencia='"+e+"']").remove(),mostrarGuia(getDataGuiaPorID(t)),lockGuia())}function getDataGuiaPorID(i){var a=null;return $.each(listaMensajes,function(e,t){if(t.mensaje.secuencia==i)return a=t,!1}),a}function mostrarGuia(e){var t=e.mensaje,i=t.asociadoA;elementInViewport(i)?createHole(e,i,t):fixGuiaView(e,i,t)}function createHole(e,t,i){var a=$(t).offset(),o=hole.replace("%data-id%",i.id).replace("%data-secuencia%",i.secuencia).replace("%data-ubicacion%",i.ubicacion).replace("%data-attachedto%",i.asociadoASelector),n='.hole[data-secuencia="'+i.secuencia+'"]';$(".mantle").append(o);var s=getTopOffset(a.top);if(a.left-diferenciaPixels<=0)var r=0;else r=a.left-diferenciaPixels;var d=$(t).outerWidth()+2*diferenciaPixels,l=$(t).outerHeight()+2*diferenciaPixels;$(n).css("top",s),$(n).css("left",r),$(n).css("width",d),$(n).css("height",l),$(n).append(e.contenido),$(n).popover(e.popover),$(n).removeClass("off"),$(n).popover("show")}function getIdGuia(e,t,i,a){return"guia-"+(i?"V":"N")+"-"+e+"-"+t.id+"-"+(t.secuencia+1)+"-"+a}function guiaNoInteresa(t,e){e||$.ajax({url:"/Guia/NoInteresaGuia",dataType:"json",type:"POST",data:{codigo:t},error:function(e){OnJsError(e,!1,"Error al clickear ver más tarde la guia con código: "+t)},timeout:svcDefaultTimeoutMs}),cerrar()}function getJsonGuia(t){return $.ajax({url:"/Guia/GetMensajesGuia",dataType:"json",type:"POST",data:{codigo:t},error:function(e){OnJsError(e,!1,"Error al obtener los mensajes de la guia con código: "+t)},timeout:svcDefaultTimeoutMs})}function cerrar(){$(".hole").popover("hide"),$(".hole").popover("destroy"),$(".hole").remove(),$(".mantle").remove(),$("body").removeClass("no-overflow"),guiaIniciada=!1}function getUbicacionGuia(e){var t="";if($(window).width()<1200)t="bottom";else switch(e){case 1:t="top";break;case 2:t="bottom";break;case 3:t="left";break;case 4:t="right"}return t+" auto"}function fixGuiaView(e,t,i){$("html, body").stop().animate({scrollTop:t.offset().top-100},200,"swing",function(){createHole(e,t,i)})}function guiaIsVisible(e){return!(e.width()<=0&&e.height()<=0)}function lockGuia(){lock=!0,setTimeout(function(){lock=!1},250)}function guiaInWidthViewPort(e){return 0<=e.offset().left}function elementInViewport(e,t){e=$(e),t=!!t;var i=$(window),a=i.width(),o=i.height(),n=i.scrollTop(),s=n+o,r=i.scrollLeft(),d=r+a,l=e.offset(),c=l.top+(t?e.height():0),u=l.top+(t?0:e.height()),h=l.left+(t?e.width():0),p=l.left+(t?0:e.width());return $(window).width()<1200&&$(".page-header").hasClass("fixed")&&(n+=50),-2<=s-u&&n-c<=2&&-2<=d-p&&r-h<=2}function fixHole(e,t){var i=getTopOffset(e.offset().top);t.css("top",i)}